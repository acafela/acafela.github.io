# What is SaaS?

> SaaS/ASP는 소프트웨어를 구축하고 관리하는 방식을 설명하는 개념 보다는
소프트웨어 유통 방식을 설명하는 개념으로 생각하는 것이 이해하는데 편할것 같습니다 :)

### SaaS

원하는 서비스를 서버, 사용자 PC에 설치 없이 **구독**하면 웹에서 사용 가능한 소프트웨어
대표적인 SaaS - Microsoft Office 365, Salesforce, Slack

### ASP

서버스, 솔루션을 **구축**해두고 이를 일정 비용을 받고 서비스 해주는 형태(아웃소싱)

## 1. SaaS/ASP 차이점

SaaS와 ASP를 구분하는 3가지 포인트가 있습니다.

- 멀티테넌시(Multitenancy) 구성여부
- 과금 형태(구독 or 임대)
- 서비스 할 대상이 정해져 있는지?

### 1.1 멀티테넌시(Multitenancy)

SaaS의 경우 멀티테넌시 지원이 가능해야함
1개 인스턴스(1개 클러스터)를 여러 테넌트(사용자 그룹)을 분리해서 사용함
각 테넌트는 *VM 또는 컨테이너*로 분리되어 있기 때문에
모든 사용자는 같은 소프트웨어에 액세스 하지만 각 테넌트의 데이터는 분리되어 있음

#### 1.1.1 SaaS 멀티테넌시 아키텍쳐, 시나리오

> 이해를 위해서 아래 그림에서 Region을 Tenant로 바라봐도 됩니다.

![multitenant-saas](https://docs.microsoft.com/en-us/azure/architecture/example-scenario/multi-saas/media/multitenant-saas.png)

*이미지 출처 [https://docs.microsoft.com/en-us/azure/architecture/example-scenario/multi-saas/multitenant-saas]*

  

1. **사용자 진입점(Front Door)** 에서 아래와 같은 처리를 한다.
   - 최초의 요청 처리
   - Region group 이 비정상 상태일 경우 처리
2. **DNS 서버**는 요청 URL에 따른 엔드포인트로 요청을 라우팅 한다.
3. **인증 서버**(여기에서는 Azure AD)가 인증 처리를 한다.
4. Region(테넌트)로 라우팅되고 나면, **Application Gateway**는 App Service로 요청을 전달하고 로드 밸렁싱을 수행함
5. **App Service**에서는 아래와 같은 처리를 할 수 있다. App Service는 자동 스케일 업, 스케일 아웃 되도록 구성 가능하다.
   - HTTP 기반 어플리케이션 처리
   - 웹 컨텐츠 제공
   - RESTFul API 제공
   - 프론트엔트 어플리케이션을 위한 백엔드 서버
6. **Data Access Layer도** Region에 따라 독립 적으로 구성된다.
독립적으로 구성되었기 때문에 다른 Region에 영향을 주지 않는다.
7. **SQL Elastic Pools**는 각 Region에 데이터 저장을 위한 공통 지점

#### 1.1.2 멀티테넌시(Multitenancy) 장점

- 서비스 사용자
  - 하드웨어와 소프트웨어를 자체적으로 구입해서 관리 할 필요 없어짐
  - 사용량, 사용자 수에 따라 유연하게 비용 계산이 가능해짐
  - 별도 업데이트 및 유지관리 없이 최신 안정화 버전 소프트웨어 사용가능(배포 시스템에 따라 컨테이너 또는 VM 으로 자동 배포됨)
- 서비스 제공자
  - 리소스 또는 부하에 따라 유연하게 스케일 인/아웃 가능
  - 인프라 비용 절감 효과(규모가 커질수록 컴퓨팅 비용이 저렴해짐)

#### 1.1.3 SaaS 멀티테넌시(Multitenancy) 구성을 위한 기반 기술들

> 사실 이것보다 훨씬 많겠지만.. ASP와 비교했을때 도드라지는 필요 기술들입니다.

- Cloud/가상화 기술(VM, 컨테이너)
   - 워크로드(부하) 또는 데이터에 따른 탄력적인 리소스 사용을 위해서 Cloud 플랫폼위에서 구현이 필요하고
   - 각 테넌트 분리를 위해서 가상화 기술(VM, 컨테이너)이 필요
- Configurable 
  - ASP에서 고객에 따라 소스레벨의 커스터마이징 하던것과는 다른 것으로
  - 각 테넌트의 관리자/운영자는 SaaS에서 제공하는 설정기능을 통해서 본인의 테넌트를 유연하게 설정 할 수 있어야 함.
- 멀티테넌시 구성에 따른 데이터베이스 구성
  - 테넌트에 자체 데이터베이스를 포함 시키기(테넌트 마다 매핑되는 DB 존재/어플리케이션 레벨 격리)
  - 테넌트 별로 논리적인 데이터베이스를 만들고 프로비전, DB  Pool 구성
  - 테넌트 별로 공유 가능한 데이터베이스를 구성하고 분할된 데이터베이스 관리하기
- 인증
  - 사용자는 인증시, 본인 조직의 자격 증명 페이지로 이동되어야 합니다.
  - 인증이 성공하면 어플리케이션에서 해당 사용자가 소속된 테넌트와 사용자 역할을 구분 할 수 있어야 합니다.(소속된 테넌트의 자원에만 접근 가능해야 합니다.)
  - SaaS 는 자체적으로 사용자를 관리할 수 있는 기능을 제공합니다.
  - 고객의 Identity provider(OAuth, SAML)를 사용할 수 있도록 옵션을 제공하는것이 일반적입니다.
- CI/CD
  - 소프트웨어 패치, 업데이트 시에 테넌트 별로 분리된 컨테이너, VM에 자동으로 배포되어야 합니다.
  - 자동 배포를 위한 CI/CD 구성이 필요합니다.

### 1.2 과금 형태

#### 1.2.1 ASP

구축비(하드웨어/커스터마이징 비용) + 라이센스비 + 운영/유지보수 비용(아웃소싱 비용) + 알파

#### 1.2.2 SaaS

서비스 사용에 대한 **구독비**

#### 1.2.3 SaaS 구독 모델

구독 모델은 혼합해서 사용 될 수 있다.

- User-based pricing model(유저당 과금 모델)
- Per active user pricing model(활성 유저당 과금 모델)
- Usage-based pricing model(사용량 과금 모델)
- Tiered-user pricing model(구간 과금 모델)
  - 제공되는 기능에 따라 패키지를 3~4개 정해 놓고 사용자에게 선택권을 주는 방식
  - 예) Premium, Standard, Lite 로 구분된 패키지
- Feature-based pricing model(기능별 과금 모델)
- Freemium model
  - 무료 마케팅을 위한 모델
  - 무료로 사용 가능한 기능(최대 용량, 최대 사용 횟수 등을 정해두고..)을 정해두는 방식

### 1.3 서비스 대상

**당연히 SaaS의 경우 서비스 대상이 정해져 있지 않습니다.**  
서비스 사용이 필요한 개인 또는 조직이 구독, 테넌트를 설정한 후에는 사용 할 수 있는 형태입니다.  
ASP의 경우 서비스 대상이 정해져 있습니다. 서비스 대상이 정해져 있기 때문에 싱글테넌트로도 서비스가 가능하고 소스레벨의 커스터마이징이 가능합니다.

## 2. SaaS Q&A

### 2.1  SaaS 멀티테넌시(Multitenancy)는 어떤 소프트웨어에 적합할까?

- 우선 소프트웨어로 대외 사업을 할 경우 - 내부시스템의 경우 오버엔지니어링(*Overengineering*)이 될 수 있다.
- HR, CRM, 그룹웨어 등과 같이 어느 정도 형태가 정해져 있는 소프트웨어(커스터마이징 없이, 그대로 사용 가능한 소프트웨어)
- 사용자 그룹 별로 독립적인 서비스/데이터 구성이 필요할 경우(같은 소프트웨어를 사용하나 사용자 그룹은 독립)

### 2.2 잘못된 SaaS 예시에는 어떤 것이 있을까?

- 클라우드에 본인들의 서비스를 올린다. 그리고 그 서비스를 특정 회사를 위해서 제공한다.  
  --> 클라우드에서 서비스 한다고 무조건 SaaS가 아니다.
- (외부) 우리 서비스는 별도 구축이 필요 없고요~ 구독해서 사용 가능합니다~~
(내부) 그런데 내부적으로 각 테넌트가 컨테이너/VM로 구분 되어 있지 않음
--> 이런 경우 테넌트별로 어플리케이션/데이터가 격리되어 있지 않고, ASP에서 회사별로 구분해서 서비스 하는 형태와 유사하다. 격리되어 있지 않기 때문에 테넌트간 영향을 서로 영향을 끼칠 수 있다.

### 2.3 SaaS의 단점은??

- **소스레벨의 커스터마이징이 불가능하다.** SaaS에서 제공하는 설정 기능을 통한 테넌트별 환경 설정만이 가능하다. SaaS 제공 업체가 만드는 데로 사용해야 한다.
- **Raw 데이터 추출이 어려 울 수 있다.** 데이터 추출도 SaaS가 제공하는 관리자 페이지를 통해서 가능 할텐데.. 직접 Database 를 관리하고 여기에서 쿼리를 날려 데이터를 추출 하던 수준으로 Raw 데이터 추출은 어렵다.
- 위에 장점으로 자동 배포를 통해 최신 버전의 소프트웨어 사용이 가능하다고 적어놨다. 그러나 이것은 단점이 될 수도 있는데, 특별한 공지 없이 잘 사용하던 메뉴가 없어질 수도? 있고 메인화면도 언제든 변경 될 수 있다.  
**즉, 사용자가 원하지 않을 수 있는 업데이트가 꾸준히 일어날 수 있다.**(이건 ASP도 마찬가지 일 수도 있겠다.)

## 마무리 하며

ASP와 비교하며 SaaS의 개념과 특징을 정리해봤다.  
여러 글들을 읽으면서 SaaS를 소프트웨어를 구축하고 관리하는 개념이 아닌 *소프트웨어 유통방식의 변화*라는 내용을 읽었는데, 내용을 정리하다보니 공감되는 내용이다.

국내 제품중에 제대로된 SaaS가 없다는 인터넷 기사를 봤는데, 이번 내용을 정리하면서 그것도 어느정도 이해가 됬다. 기술적으로 알아야 하는것도 많고 구축에 상대적으로 많은 시간이 소요될것 같다.  

사실 SaaS 를 구축해본 경험은 없고 구글링한 자료들과 관련한 기본 지식, 그리고 SaaS 어플리케이션을 사용해본 경험을 바탕으로 내용을 정리했기 때문에, 잘못된 내용이 있을 수 있다. 그러나 나름 정리한 자료가 SaaS를 이해하는데 도움이 되었으면 좋겠다.

조금 더 자세한 내용은 아래 참고자료를 활용하기 바랍니다!!

## 참고자료

- 한국전자통신연구원 - SaaS 기술 개발 동향(https://ettrends.etri.re.kr/ettrends/118/0905001466/24-4_014_027.pdf)
- Microsoft - Multitenant SaaS on Azure(https://docs.microsoft.com/en-us/azure/architecture/example-scenario/multi-saas/multitenant-saas)
- Microsoft - Manage identity in multitenant applications(https://docs.microsoft.com/en-us/azure/architecture/multitenant-identity)
- spdload.com - https://spdload.com/blog/asp-model-vs-saas-model/
- dzone.com - https://dzone.com/articles/saas-vs-asp-%E2%80%93-understanding
- Red Hat - 멀티테넌시란? https://www.redhat.com/ko/topics/cloud-computing/what-is-multitenancy